# üïπÔ∏è bil-cs2-parser

**bil-cs2-parser** ‚Äî —ç—Ç–æ —É—Ç–∏–ª–∏—Ç–∞ –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è, –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –º–∞—Ç—á–µ–π CS2 (Counter-Strike 2).  
–ü—Ä–æ–≥—Ä–∞–º–º–∞ —á–∏—Ç–∞–µ—Ç ¬´—Å—ã—Ä—ã–µ¬ª JSON-—Ñ–∞–π–ª—ã –º–∞—Ç—á–µ–π, –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç –∏—Ö –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç (player √ó opponent √ó round)  
–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ –æ—Ç–¥–µ–ª—å–Ω—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é. –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ RabbitMQ.

---

## üöÄ –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üìÇ –ß—Ç–µ–Ω–∏–µ –º–∞—Ç—á–µ–π –∏–∑ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `games_raw`
- üß© –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ –ø–ª–æ—Å–∫–∏–π —Ñ–æ—Ä–º–∞—Ç (flatten)
- üíæ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ `games_flatten`
- üì® –ü—É–±–ª–∏–∫–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏—è –≤ RabbitMQ
- ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —á–µ—Ä–µ–∑ `.env` –∏–ª–∏ CLI –∞—Ä–≥—É–º–µ–Ω—Ç `--env-file`
- üß† –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–º —É—Ä–æ–≤–Ω–µ–º (`DEBUG`, `INFO`, –∏ —Ç.–¥.)

---

## ‚öôÔ∏è –ó–∞–ø—É—Å–∫

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

```env
APP_LOG_LEVEL=INFO
RABBITMQ_URL=amqp://guest:guest@localhost/
RABBITMQ_QUEUE_NAME=games_flatten
GAMES_RAW_DIR=../bil-cs2-data/games_raw
GAMES_FLATTEN_DIR=../bil-cs2-data/games_flatten
```

–ó–∞—Ç–µ–º –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –ø—É—Ç–∏ –∫ .env —á–µ—Ä–µ–∑ —Ñ–ª–∞–≥ --env-file:

```bash
poetry install
poetry run main.py --env-file .env
```

–í –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ (–≥–¥–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è `Dockerfile`) –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É:

### Docker

```bash
docker build -t bil-cs2-parser .
````

```bash
docker run --rm \
  -v $(pwd)/data:/data \
  -v $(pwd)/.env:/app/.env \
  --name bil-parser \
  bil-cs2-parser
```